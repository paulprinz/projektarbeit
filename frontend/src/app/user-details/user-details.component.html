<div id="embeddedViewStyle" class="content-wrapper">
  <div class="position-absolute top-50 start-50 translate-middle">
    <mat-card id="user-details-box">
      <mat-card-title class="d-flex justify-content-center">
        {{ username }}
      </mat-card-title>
      &nbsp;
      <!-- Avatar Section -->
      <mat-card-content>
        <div class="d-flex justify-content-center">
          <div class="avatar-container">
            <div
              class="image-container"
              *ngIf="fileUrl; else placeholder"
              [ngClass]="{'box-shadow-avatar': !!selectedFile}"
              [ngStyle]="{backgroundImage: 'url(' + fileUrl + ')'}"
            ></div>
            <ng-template #placeholder>
              <div class="image-container avatar-placeholder"></div>
            </ng-template>
            <label for="avatar-input-file">
              <div class="icon-wrapper">
                <input
                  type="file"
                  id="avatar-input-file"
                  accept="image/*"
                  (change)="onFileChange($event)"
                />
                <!-- Upload or Delete icon -->
                <span class="material-symbols-outlined" *ngIf="!fileUrl">
                  upload
                </span>
                <span class="material-symbols-outlined" *ngIf="fileUrl" (click)="deleteAvatar()">
                  delete
                </span>
              </div>
            </label>
          </div>
        </div>
      </mat-card-content>
      <!-- Save Button -->
      <mat-card-actions class="d-flex justify-content-center">
        <div class="d-grid gap-2 col-4 mx-auto">
          <button mat-button (click)="uploadAvatar()">
            Save
          </button>
        </div>
      </mat-card-actions>
    </mat-card>

    <div class="spacer"></div>

    <!-- Password Change Section -->
    <mat-card id="user-details-box" *ngIf="!userIdParam">
      <mat-card-title class="d-flex justify-content-center mb-3">
        Password Change
      </mat-card-title>
      <mat-card-content>
        <form [formGroup]="passwordForm" #formDirective="ngForm">

          <div class="row justify-content-center">
            <mat-form-field class="inputFields">
              <mat-label>Old Password</mat-label>
              <input matInput [type]="'password'" id="input-old-password" formControlName="oldPassword" required/>
            </mat-form-field>
          </div>

          <div class="row justify-content-center">
            <mat-form-field class="inputFields">
              <mat-label>New Password</mat-label>
              <input matInput [type]="'password'" id="input-new-password" formControlName="newPassword" required/>
            </mat-form-field>
          </div>

          <div class="row justify-content-center">
              <mat-form-field class="inputFields">
                <mat-label>Confirm New Password</mat-label>
                <input matInput [type]="'password'" id="confirm-new-password" formControlName="confirmNewPassword" required/>
              </mat-form-field>
          </div>
        </form>
      </mat-card-content>
        <!-- Save Button -->
        <mat-card-actions class="d-flex justify-content-center">
          <div class="d-grid gap-2 col-4 mx-auto">
            <button mat-button (click)="changePassword()">
              Save
            </button>
          </div>
        </mat-card-actions>
    </mat-card>
  </div>
  <!-- Space -->
  <div class="bottom-space"> </div>
</div>
  